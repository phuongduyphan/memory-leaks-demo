<!DOCTYPE html>
<html>

<head>
  <title>Example 3</title>
</head>

<body>
  <h1>Example 3</h1>
  <h2>Example 3: Scattered objects</h2>
  <p><button onclick="init()">Create scattered objects</button></p>
  <p>Take a heap snapshot and watch the objects (Item) allocations.</p>
  <hr />

  <script>
    function Item(x) {
      this.x = x;
    }

    function numbers() {
      var result = new Array(10000);
      for (var i = 0, l = result.length; i < l; ++i) result[i] = new Item(i);
      return new Item(result);
    }

    function strings() {
      var result = new Array(10000);
      for (var i = 0, l = result.length; i < l; ++i)
        result[i] = new Item(i.toString());
      return new Item(result);
    }

    function init() {
      numberCache = numbers();
      stringCache = strings();
      documentCache = new Item(document.body.textContent.toLowerCase());
    }


  </script>
</body>

</html>